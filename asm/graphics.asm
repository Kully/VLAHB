// Display: 160 X 120
// Slots for Display: R[4101:43201]

// ******
// Colors
// ******

// 0XFF0000FF - Red
// 0X00FF00FF - Green
// 0X0000FFFF - Blue
// 0X000000FF - Black
// 0XFAFAFAFF - Light Grey
// 0X333333FF - Dark Grey

// colorhunt - easter colors
// *************************
// 0Xfcf9ecff - faded baige
// 0Xb0f4e6ff - cool blue
// 0X67eacaff - clean green
// 0X12d3cfff - ocean blue


SCREEN_FILL_BLACK:
	LD R[9996] 0X000000FF
	LD R[4099] 9996

	LD R[4096] 4101
	LD R[4097] 43201
	LD R[U:V] R[Z]
	BLIT
	RETURN


SCREEN_FILL_RED:
	LD R[9996] 0XFF0000FF
	LD R[4099] 9996

	LD R[4096] 4101
	LD R[4097] 43201
	LD R[U:V] R[Z]
	BLIT
	RETURN


SCREEN_FILL_GREEN:
	LD R[9996] 0X00FF00FF
	LD R[4099] 9996

	LD R[4096] 4101
	LD R[4097] 43201
	LD R[U:V] R[Z]
	BLIT
	RETURN


SCREEN_FILL_BLUE:
	LD R[9996] 0X00FF00FF
	LD R[4099] 9996

	LD R[4096] 4101
	LD R[4097] 43201
	LD R[U:V] R[Z]
	BLIT
	RETURN


GET_DISPLAY_WIDTH_IN_PIXELS:
	LD R[4100] 160
	RETURN


GET_DISPLAY_HEIGHT_IN_PIXELS:
	LD R[4100] 120
	RETURN

// R[0] -> X
// R[1] -> Y
VRAM_INDEX_FROM_X_Y:
	LD R[4100] 160  // GET_DISPLAY_WIDTH_IN_PIXELS
	MUL R[4100] R[1]
	ADD R[4100] R[0]
	ADD R[4100] 4101  // should be LD
	RETURN

X_FROM_VRAM_INDEX:
	SUB R[0] 4101 // sub VRAM start_idx
	LD R[1] 160
	CALL MATH_DIV_REMAINDER
	RETURN

Y_FROM_VRAM_INDEX:
	SUB R[0] 4101 // sub VRAM start_idx
	LD R[1] 160
	CALL MATH_FLOOR_DIV
	RETURN

DRAW_INFINITE_LINE_FROM_TOP_LEFT:
	// load indices in U,V
	LD R[4096] 4100
	LD R[4097] 4260

	// store x=0 and y=0 far from VLAHB
	LD R[63000] 0
	LD R[63001] 0

		MAIN_DRAW_INFINITE_LINE_FROM_TOP_LEFT:
		// load (x,y) in U
		LD R[0] R[63000]
		LD R[1] R[63001]
		CALL VRAM_INDEX_FROM_X_Y
		LD R[4096] R[4100]

		LD R[U] 0XAC80FFFF
		BLIT

		// increment x and y
		ADD R[63000] 1
		ADD R[63001] 1

		GOTO MAIN_DRAW_INFINITE_LINE_FROM_TOP_LEFT


// R[0] -> X
// R[1] -> Y
// R[2] -> len of line
// R[3] -> COLOR
// TOOD: WIP
DRAW_LINE_FROM_X_Y_DOWN:
	CALL VRAM_INDEX_FROM_X_Y
	LD R[4096] R[4100]  // VRAM idx

	LD R[U] R[3]  // load
	SUB R[2] 1  // decr
	LTE R[2] 0  // compare
	GOTO DRAW_LINE_FROM_X_Y_DOWN
	RETURN




FILL_VRAM_WITH_RAND_VALUES:
	// U -> VRAM idx
	RAND R[4099] 
	MUL R[4099] 0XFFFFFFFE
	LD R[U] R[4099]  // load pixel

	ADD R[4096] 1  // incr VRAM idx

	BLIT  // draw

	GTE R[4096] 23301
	GOTO FILL_VRAM_WITH_RAND_VALUES
	RETURN
